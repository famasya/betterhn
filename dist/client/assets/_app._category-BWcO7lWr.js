import{$ as e,a0 as t,a1 as s,j as n,a2 as a,L as o,J as r,E as i,e as c,u as l,g as d,h as u,i as h,P as g,l as f,a3 as p,m,q as b,s as x,a4 as v,c as y,H as j,a5 as w,a6 as N,a7 as I,a8 as k,Y as E,Z as _,a9 as C,aa as T,ab as D,o as R,B as S,ac as F,ad as L,ae as A,_ as P}from"./main-BchfpV3l.js";import{u as $,f as M,a as z}from"./formatRelative-B5zaA9-A.js";import{d as O,h as q,R as K,b as B,F as V,a as U,c as G,u as H}from"./Combination-Bdyu9hx7.js";import"./useBaseQuery-C3E4o3TJ.js";function W(e,...t){return function(e){return"function"==typeof e}(e)?e(...t):e}class Z{#e;#t;#s;#n;#a;#o;#r;#i=0;#c=5;#l=()=>{this.debugLog("Connected to event bus"),this.#a=!0,this.debugLog("Emitting queued events",this.#n),this.#n.forEach(e=>this.emitEventToBus(e)),this.#n=[],this.stopConnectLoop(),this.#t().removeEventListener("tanstack-connect-success",this.#l)};#d=()=>{if(this.#t().addEventListener("tanstack-connect-success",this.#l),this.#i<this.#c)return this.#i++,void this.dispatchCustomEvent("tanstack-connect",{});this.#t().removeEventListener("tanstack-connect",this.#d),this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};constructor({pluginId:e,debug:t=!1}){this.#e=e,this.#t=this.getGlobalTarget,this.#s=t,this.debugLog(" Initializing event subscription for plugin",this.#e),this.#n=[],this.#a=!1,this.#o=null,this.#r=500}startConnectLoop(){null!==this.#o||this.#a||(this.debugLog(`Starting connect loop (every ${this.#r}ms)`),this.#o=setInterval(this.#d,this.#r))}stopConnectLoop(){null!==this.#o&&(clearInterval(this.#o),this.#o=null,this.debugLog("Stopped connect loop"))}debugLog(...e){this.#s}getGlobalTarget(){if("undefined"!=typeof globalThis&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if("undefined"!=typeof window&&void 0!==window.addEventListener)return this.debugLog("Using window as event target"),window;const e="undefined"!=typeof EventTarget?new EventTarget:void 0;return void 0===e||void 0===e.addEventListener?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#e}dispatchCustomEventShim(e,t){try{const s=new Event(e,{detail:t});this.#t().dispatchEvent(s)}catch(s){this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,t){try{this.#t().dispatchEvent(new CustomEvent(e,{detail:t}))}catch(s){this.dispatchCustomEventShim(e,t)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}emit(e,t){return this.#a?this.emitEventToBus({type:`${this.#e}:${e}`,payload:t,pluginId:this.#e}):(this.debugLog("Bus not available, will be pushed as soon as connected"),this.#n.push({type:`${this.#e}:${e}`,payload:t,pluginId:this.#e}),void("undefined"!=typeof CustomEvent&&(this.#d(),this.startConnectLoop())))}on(e,t){const s=`${this.#e}:${e}`,n=e=>{this.debugLog("Received event from bus",e.detail),t(e.detail)};return this.#t().addEventListener(s,n),this.debugLog("Registered event to bus",s),()=>{this.#t().removeEventListener(s,n)}}onAll(e){const t=t=>{const s=t.detail;e(s)};return this.#t().addEventListener("tanstack-devtools-global",t),()=>this.#t().removeEventListener("tanstack-devtools-global",t)}onAllPluginEvents(e){const t=t=>{const s=t.detail;this.#e&&s.pluginId!==this.#e||e(s)};return this.#t().addEventListener("tanstack-devtools-global",t),()=>this.#t().removeEventListener("tanstack-devtools-global",t)}}const J=new class extends Z{constructor(e){super({pluginId:"pacer",debug:e?.debug})}};const Q={enabled:!0,leading:!1,trailing:!0,wait:0};class X{constructor(t,s){this.fn=t,this.store=new e({canLeadingExecute:!0,executionCount:0,isPending:!1,lastArgs:void 0,status:"idle",maybeExecuteCount:0}),this.setOptions=e=>{this.options={...this.options,...e},this.#u()||this.cancel()},this.#h=e=>{var t,s;this.store.setState(t=>{const s={...t,...e},{isPending:n}=s;return{...s,status:this.#u()?n?"pending":"idle":"disabled"}}),t="Debouncer",s=this,J.emit(t,s)},this.#u=()=>!!W(this.options.enabled,this),this.#g=()=>W(this.options.wait,this),this.maybeExecute=(...e)=>{if(!this.#u())return;this.#h({maybeExecuteCount:this.store.state.maybeExecuteCount+1});let t=!1;this.options.leading&&this.store.state.canLeadingExecute&&(this.#h({canLeadingExecute:!1}),t=!0,this.#f(...e)),this.options.trailing&&this.#h({isPending:!0,lastArgs:e}),this.#p&&clearTimeout(this.#p),this.#p=setTimeout(()=>{this.#h({canLeadingExecute:!0}),this.options.trailing&&!t&&this.#f(...e)},this.#g())},this.#f=(...e)=>{this.#u()&&(this.fn(...e),this.#h({executionCount:this.store.state.executionCount+1,isPending:!1,lastArgs:void 0}),this.options.onExecute?.(e,this))},this.flush=()=>{this.store.state.isPending&&this.store.state.lastArgs&&(this.#m(),this.#f(...this.store.state.lastArgs))},this.#m=()=>{this.#p&&(clearTimeout(this.#p),this.#p=void 0)},this.cancel=()=>{this.#m(),this.#h({canLeadingExecute:!0,isPending:!1})},this.reset=()=>{this.#h({canLeadingExecute:!0,executionCount:0,isPending:!1,lastArgs:void 0,status:"idle",maybeExecuteCount:0})},this.key=s.key||("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():""),this.options={...Q,...s},this.#h(this.options.initialState??{}),J.on("d-Debouncer",e=>{e.payload.key===this.key&&(this.#h(e.payload.store.state),this.setOptions(e.payload.options))})}#p;#h;#u;#g;#f;#m}function Y(){const{pathname:e}=O(),t=e.split("/")[1]||"top",{data:s,isLoading:o}=$({queryKey:["recents"],queryFn:async({signal:e})=>await a.get("search_by_date?tags=story",{signal:e}).json()}),{data:r,isLoading:i}=$({queryKey:["active-posts"],queryFn:async({signal:e})=>{const t=Math.floor(Date.now()/1e3)-3600;return await a.get(`search_by_date?tags=comment&numericFilters=created_at_i>${t}`,{signal:e}).json()}});return n.jsxs("div",{className:"mt-8",children:[n.jsx("div",{children:"Or browse recents submissions"}),n.jsx("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-2 lg:grid-cols-3",children:o?n.jsx(ee,{}):n.jsx(te,{category:t,posts:s?.hits||[]})}),n.jsx("div",{className:"mt-8",children:"Or active discussions"}),n.jsx("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-2 lg:grid-cols-3",children:i?n.jsx(ee,{}):n.jsx(se,{category:t,comments:r?.hits||[]})})]})}function ee(){return Array.from({length:6}).map((e,t)=>n.jsx("div",{className:"mt-2 h-40 w-full animate-pulse rounded-lg bg-zinc-200 dark:bg-white/10"},t.toString()))}function te({posts:e,category:t}){return e.slice(0,6).map(e=>n.jsxs("div",{className:"mt-2 flex min-h-40 w-full flex-col rounded-lg border border-zinc-200 bg-zinc-100 p-2 text-sm dark:border-gray-800 dark:bg-white/10 dark:text-gray-200",children:[n.jsx("div",{className:"mb-2 flex-grow",children:e.url?n.jsx(o,{className:"hover:text-orange-700 dark:hover:text-orange-300",rel:"noopener noreferrer",target:"_blank",to:e.url,children:n.jsx("h1",{children:e.title})}):n.jsx("h1",{children:e.title})}),n.jsxs("div",{className:"text-xs",children:[n.jsx("p",{children:M(1e3*e.created_at_i,{addSuffix:!0})}),n.jsx(o,{params:{postId:`${r(e.title)}-${e.objectID}`,category:t},state:e=>({...e,view:"post"}),to:"/$category/$postId",children:n.jsx(i,{className:"mt-2 w-full",size:"sm",variant:"outline",children:"View Post"})})]})]},e.objectID))}function se({comments:e,category:t}){return e.slice(0,6).map(e=>n.jsxs("div",{className:"mt-2 flex min-h-40 w-full flex-col rounded-lg border border-zinc-200 bg-zinc-100 p-2 text-sm dark:border-gray-800 dark:bg-white/10 dark:text-gray-200",children:[n.jsx("div",{className:"mb-2 flex-grow",children:e.story_url?n.jsx(o,{className:"hover:text-orange-700 dark:hover:text-orange-300",rel:"noopener noreferrer",target:"_blank",to:e.story_url,children:n.jsx("h1",{children:e.story_title||"HN Discussions"})}):n.jsx("h1",{children:e.story_title||"HN Discussions"})}),n.jsxs("div",{className:"text-xs",children:[n.jsx("p",{children:M(1e3*e.created_at_i,{addSuffix:!0})}),n.jsx(o,{params:{postId:`${r(e.story_title||"")}-${e.story_id}`,category:t},state:e=>({...e,view:"post"}),to:"/$category/$postId",children:n.jsx(i,{className:"mt-2 w-full",size:"sm",variant:"outline",children:"View Post"})})]})]},e.objectID))}var ne="Dialog",[ae,oe]=d(ne),[re,ie]=ae(ne),ce=e=>{const{__scopeDialog:t,children:s,open:a,defaultOpen:o,onOpenChange:r,modal:i=!0}=e,d=c.useRef(null),h=c.useRef(null),[g,f]=l({prop:a,defaultProp:o??!1,onChange:r,caller:ne});return n.jsx(re,{scope:t,triggerRef:d,contentRef:h,contentId:u(),titleId:u(),descriptionId:u(),open:g,onOpenChange:f,onOpenToggle:c.useCallback(()=>f(e=>!e),[f]),modal:i,children:s})};ce.displayName=ne;var le="DialogTrigger",de=c.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,o=ie(le,s),r=h(t,o.triggerRef);return n.jsx(g.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":De(o.open),...a,ref:r,onClick:f(e.onClick,o.onOpenToggle)})});de.displayName=le;var ue="DialogPortal",[he,ge]=ae(ue,{forceMount:void 0}),fe=e=>{const{__scopeDialog:t,forceMount:s,children:a,container:o}=e,r=ie(ue,t);return n.jsx(he,{scope:t,forceMount:s,children:c.Children.map(a,e=>n.jsx(p,{present:s||r.open,children:n.jsx(m,{asChild:!0,container:o,children:e})}))})};fe.displayName=ue;var pe="DialogOverlay",me=c.forwardRef((e,t)=>{const s=ge(pe,e.__scopeDialog),{forceMount:a=s.forceMount,...o}=e,r=ie(pe,e.__scopeDialog);return r.modal?n.jsx(p,{present:a||r.open,children:n.jsx(xe,{...o,ref:t})}):null});me.displayName=pe;var be=b("DialogOverlay.RemoveScroll"),xe=c.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,o=ie(pe,s);return n.jsx(K,{as:be,allowPinchZoom:!0,shards:[o.contentRef],children:n.jsx(g.div,{"data-state":De(o.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),ve="DialogContent",ye=c.forwardRef((e,t)=>{const s=ge(ve,e.__scopeDialog),{forceMount:a=s.forceMount,...o}=e,r=ie(ve,e.__scopeDialog);return n.jsx(p,{present:a||r.open,children:r.modal?n.jsx(je,{...o,ref:t}):n.jsx(we,{...o,ref:t})})});ye.displayName=ve;var je=c.forwardRef((e,t)=>{const s=ie(ve,e.__scopeDialog),a=c.useRef(null),o=h(t,s.contentRef,a);return c.useEffect(()=>{const e=a.current;if(e)return q(e)},[]),n.jsx(Ne,{...e,ref:o,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:f(e.onCloseAutoFocus,e=>{e.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:f(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;(2===t.button||s)&&e.preventDefault()}),onFocusOutside:f(e.onFocusOutside,e=>e.preventDefault())})}),we=c.forwardRef((e,t)=>{const s=ie(ve,e.__scopeDialog),a=c.useRef(!1),o=c.useRef(!1);return n.jsx(Ne,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||s.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,o.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(o.current=!0));const n=t.target,r=s.triggerRef.current?.contains(n);r&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}})}),Ne=c.forwardRef((e,t)=>{const{__scopeDialog:s,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:r,...i}=e,l=ie(ve,s),d=c.useRef(null),u=h(t,d);return B(),n.jsxs(n.Fragment,{children:[n.jsx(V,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:o,onUnmountAutoFocus:r,children:n.jsx(x,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":De(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(Le,{titleId:l.titleId}),n.jsx(Ae,{contentRef:d,descriptionId:l.descriptionId})]})]})}),Ie="DialogTitle",ke=c.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,o=ie(Ie,s);return n.jsx(g.h2,{id:o.titleId,...a,ref:t})});ke.displayName=Ie;var Ee="DialogDescription",_e=c.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,o=ie(Ee,s);return n.jsx(g.p,{id:o.descriptionId,...a,ref:t})});_e.displayName=Ee;var Ce="DialogClose",Te=c.forwardRef((e,t)=>{const{__scopeDialog:s,...a}=e,o=ie(Ce,s);return n.jsx(g.button,{type:"button",...a,ref:t,onClick:f(e.onClick,()=>o.onOpenChange(!1))})});function De(e){return e?"open":"closed"}Te.displayName=Ce;var Re="DialogTitleWarning",[Se,Fe]=v(Re,{contentName:ve,titleName:Ie,docsSlug:"dialog"}),Le=({titleId:e})=>{const t=Fe(Re),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return c.useEffect(()=>{if(e){document.getElementById(e)}},[s,e]),null},Ae=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Fe("DialogDescriptionWarning").contentName}}.`;return c.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");if(t&&s){document.getElementById(t)}},[s,e,t]),null},Pe=me,$e=ye,Me=ke,ze=_e,Oe=Te;const qe=ce,Ke=de,Be=fe,Ve=c.forwardRef(({className:e,...t},s)=>n.jsx(Pe,{ref:s,className:y("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Ve.displayName=Pe.displayName;const Ue=c.forwardRef(({className:e,children:t,...s},a)=>n.jsxs(Be,{children:[n.jsx(Ve,{}),n.jsxs($e,{ref:a,className:y("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:bg-zinc-900",e),...s,children:[t,n.jsxs(Oe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(j,{icon:w,className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ue.displayName=$e.displayName;const Ge=({className:e,...t})=>n.jsx("div",{className:y("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ge.displayName="DialogHeader";const He=c.forwardRef(({className:e,...t},s)=>n.jsx(Me,{ref:s,className:y("text-lg font-semibold leading-none tracking-tight",e),...t}));He.displayName=Me.displayName;c.forwardRef(({className:e,...t},s)=>n.jsx(ze,{ref:s,className:y("text-sm text-muted-foreground",e),...t})).displayName=ze.displayName;var We=c.forwardRef((e,t)=>n.jsx(g.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));We.displayName="Label";var Ze=We;const Je=N("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Qe=c.forwardRef(({className:e,...t},s)=>n.jsx(Ze,{ref:s,className:y(Je(),e),...t}));Qe.displayName=Ze.displayName;var Xe="Switch",[Ye,et]=d(Xe),[tt,st]=Ye(Xe),nt=c.forwardRef((e,t)=>{const{__scopeSwitch:s,name:a,checked:o,defaultChecked:r,required:i,disabled:d,value:u="on",onCheckedChange:p,form:m,...b}=e,[x,v]=c.useState(null),y=h(t,e=>v(e)),j=c.useRef(!1),w=!x||(m||!!x.closest("form")),[N,I]=l({prop:o,defaultProp:r??!1,onChange:p,caller:Xe});return n.jsxs(tt,{scope:s,checked:N,disabled:d,children:[n.jsx(g.button,{type:"button",role:"switch","aria-checked":N,"aria-required":i,"data-state":it(N),"data-disabled":d?"":void 0,disabled:d,value:u,...b,ref:y,onClick:f(e.onClick,e=>{I(e=>!e),w&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),w&&n.jsx(rt,{control:x,bubbles:!j.current,name:a,value:u,checked:N,required:i,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});nt.displayName=Xe;var at="SwitchThumb",ot=c.forwardRef((e,t)=>{const{__scopeSwitch:s,...a}=e,o=st(at,s);return n.jsx(g.span,{"data-state":it(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t})});ot.displayName=at;var rt=c.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:a=!0,...o},r)=>{const i=c.useRef(null),l=h(i,r),d=U(s),u=I(t);return c.useEffect(()=>{const e=i.current;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set;if(d!==s&&n){const t=new Event("click",{bubbles:a});n.call(e,s),e.dispatchEvent(t)}},[d,s,a]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...o,tabIndex:-1,ref:l,style:{...o.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function it(e){return e?"checked":"unchecked"}rt.displayName="SwitchBubbleInput";var ct=nt,lt=ot;const dt=c.forwardRef(({className:e,...t},s)=>n.jsx(ct,{className:y("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=unchecked]:bg-gray-300 data-[state=checked]:border-blue-600 data-[state=checked]:bg-blue-600 data-[state=checked]:text-white dark:data-[state=checked]:border-blue-700 dark:data-[state=checked]:bg-blue-700 dark:data-[state=unchecked]:bg-gray-700",e),...t,ref:s,children:n.jsx(lt,{className:y("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));function ut(){const{resolvedTheme:e,setTheme:t}=k(),s="dark"===e,a=E(_,e=>e.compactMode);return n.jsxs(qe,{children:[n.jsx(Ke,{asChild:!0,children:n.jsx(i,{variant:"outline",children:n.jsx(j,{icon:C,size:16})})}),n.jsxs(Ue,{className:"mx-auto max-w-[calc(100vw-2rem)] rounded-md p-4 text-sm duration-0 md:mx-0 md:max-w-lg",children:[n.jsx(Ge,{children:n.jsx(He,{className:"font-medium text-base",children:"Configuration"})}),n.jsx(_e,{asChild:!0,children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex flex-row items-center justify-between",children:[n.jsx("div",{children:"Color Schema"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Qe,{className:"text-xs",htmlFor:"color-mode",children:s?"Dark":"Light"}),n.jsx(dt,{checked:s,id:"color-mode",onCheckedChange:()=>{t(s?"light":"dark")}})]})]}),n.jsxs("div",{className:"flex flex-row items-center justify-between",children:[n.jsx("div",{children:"Layout Mode"}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Qe,{className:"text-xs",htmlFor:"compact-mode",children:"Compact"}),n.jsx(dt,{checked:a,id:"compact-mode",onCheckedChange:e=>T("compactMode",e)})]})]})]}),n.jsxs("div",{className:"mt-8 border-black/20 border-t border-dashed bg-zinc-200 p-2 font-mono text-xs dark:border-white/20 dark:bg-zinc-800",children:[n.jsx("strong",{children:"About"})," ",n.jsx("br",{}),"BetterHN is a Hacker News reader with a modern UI. Enjoy a clean, distraction-free interface to read Hacker News stories, comments, and discussions."]}),n.jsx(i,{asChild:!0,className:"mt-2",size:"xs",children:n.jsxs("a",{href:"https://github.com/famasya/betterhn",rel:"noopener noreferrer",target:"_blank",children:[n.jsx(j,{icon:D})," Source Code"]})})]})})]})]})}dt.displayName=ct.displayName;const ht=c.forwardRef(({className:e,type:t,...s},a)=>n.jsx("input",{type:t,className:y("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:bg-white/15",e),ref:a,...s}));ht.displayName="Input";var gt="rovingFocusGroup.onEntryFocus",ft={bubbles:!1,cancelable:!0},pt="RovingFocusGroup",[mt,bt,xt]=G(pt),[vt,yt]=d(pt,[xt]),[jt,wt]=vt(pt),Nt=c.forwardRef((e,t)=>n.jsx(mt.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(mt.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(It,{...e,ref:t})})}));Nt.displayName=pt;var It=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,orientation:a,loop:o=!1,dir:r,currentTabStopId:i,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:u,onEntryFocus:p,preventScrollOnEntryFocus:m=!1,...b}=e,x=c.useRef(null),v=h(t,x),y=H(r),[j,w]=l({prop:i,defaultProp:d??null,onChange:u,caller:pt}),[N,I]=c.useState(!1),k=R(p),E=bt(s),_=c.useRef(!1),[C,T]=c.useState(0);return c.useEffect(()=>{const e=x.current;if(e)return e.addEventListener(gt,k),()=>e.removeEventListener(gt,k)},[k]),n.jsx(jt,{scope:s,orientation:a,dir:y,loop:o,currentTabStopId:j,onItemFocus:c.useCallback(e=>w(e),[w]),onItemShiftTab:c.useCallback(()=>I(!0),[]),onFocusableItemAdd:c.useCallback(()=>T(e=>e+1),[]),onFocusableItemRemove:c.useCallback(()=>T(e=>e-1),[]),children:n.jsx(g.div,{tabIndex:N||0===C?-1:0,"data-orientation":a,...b,ref:v,style:{outline:"none",...e.style},onMouseDown:f(e.onMouseDown,()=>{_.current=!0}),onFocus:f(e.onFocus,e=>{const t=!_.current;if(e.target===e.currentTarget&&t&&!N){const t=new CustomEvent(gt,ft);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=E().filter(e=>e.focusable);Ct([e.find(e=>e.active),e.find(e=>e.id===j),...e].filter(Boolean).map(e=>e.ref.current),m)}}_.current=!1}),onBlur:f(e.onBlur,()=>I(!1))})})}),kt="RovingFocusGroupItem",Et=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:s,focusable:a=!0,active:o=!1,tabStopId:r,children:i,...l}=e,d=u(),h=r||d,p=wt(kt,s),m=p.currentTabStopId===h,b=bt(s),{onFocusableItemAdd:x,onFocusableItemRemove:v,currentTabStopId:y}=p;return c.useEffect(()=>{if(a)return x(),()=>v()},[a,x,v]),n.jsx(mt.ItemSlot,{scope:s,id:h,focusable:a,active:o,children:n.jsx(g.span,{tabIndex:m?0:-1,"data-orientation":p.orientation,...l,ref:t,onMouseDown:f(e.onMouseDown,e=>{a?p.onItemFocus(h):e.preventDefault()}),onFocus:f(e.onFocus,()=>p.onItemFocus(h)),onKeyDown:f(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void p.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,s){const n=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,s);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)?void 0:_t[n]}(e,p.orientation,p.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=b().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){"prev"===t&&a.reverse();const o=a.indexOf(e.currentTarget);a=p.loop?(n=o+1,(s=a).map((e,t)=>s[(n+t)%s.length])):a.slice(o+1)}setTimeout(()=>Ct(a))}var s,n}),children:"function"==typeof i?i({isCurrentTabStop:m,hasTabStop:null!=y}):i})})});Et.displayName=kt;var _t={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ct(e,t=!1){const s=document.activeElement;for(const n of e){if(n===s)return;if(n.focus({preventScroll:t}),document.activeElement!==s)return}}var Tt=Nt,Dt=Et,Rt="Tabs",[St,Ft]=d(Rt,[yt]),Lt=yt(),[At,Pt]=St(Rt),$t=c.forwardRef((e,t)=>{const{__scopeTabs:s,value:a,onValueChange:o,defaultValue:r,orientation:i="horizontal",dir:c,activationMode:d="automatic",...h}=e,f=H(c),[p,m]=l({prop:a,onChange:o,defaultProp:r??"",caller:Rt});return n.jsx(At,{scope:s,baseId:u(),value:p,onValueChange:m,orientation:i,dir:f,activationMode:d,children:n.jsx(g.div,{dir:f,"data-orientation":i,...h,ref:t})})});$t.displayName=Rt;var Mt="TabsList",zt=c.forwardRef((e,t)=>{const{__scopeTabs:s,loop:a=!0,...o}=e,r=Pt(Mt,s),i=Lt(s);return n.jsx(Tt,{asChild:!0,...i,orientation:r.orientation,dir:r.dir,loop:a,children:n.jsx(g.div,{role:"tablist","aria-orientation":r.orientation,...o,ref:t})})});zt.displayName=Mt;var Ot="TabsTrigger",qt=c.forwardRef((e,t)=>{const{__scopeTabs:s,value:a,disabled:o=!1,...r}=e,i=Pt(Ot,s),c=Lt(s),l=Vt(i.baseId,a),d=Ut(i.baseId,a),u=a===i.value;return n.jsx(Dt,{asChild:!0,...c,focusable:!o,active:u,children:n.jsx(g.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...r,ref:t,onMouseDown:f(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(a)}),onKeyDown:f(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(a)}),onFocus:f(e.onFocus,()=>{const e="manual"!==i.activationMode;u||o||!e||i.onValueChange(a)})})})});qt.displayName=Ot;var Kt="TabsContent",Bt=c.forwardRef((e,t)=>{const{__scopeTabs:s,value:a,forceMount:o,children:r,...i}=e,l=Pt(Kt,s),d=Vt(l.baseId,a),u=Ut(l.baseId,a),h=a===l.value,f=c.useRef(h);return c.useEffect(()=>{const e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),n.jsx(p,{present:o||h,children:({present:s})=>n.jsx(g.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!s,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:s&&r})})});function Vt(e,t){return`${e}-trigger-${t}`}function Ut(e,t){return`${e}-content-${t}`}Bt.displayName=Kt;var Gt=zt,Ht=qt,Wt=Bt;const Zt=$t,Jt=c.forwardRef(({className:e,...t},s)=>n.jsx(Gt,{ref:s,className:y("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));Jt.displayName=Gt.displayName;const Qt=c.forwardRef(({className:e,...t},s)=>n.jsx(Ht,{ref:s,className:y("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));Qt.displayName=Ht.displayName;function Xt({origin:e}){const{tags:a,search:r,page:l}=t({from:"/_app"}),[d,u]=c.useState(r||""),{data:h,isLoading:g}=(()=>{const{tags:e,search:n,page:a}=t({from:"/_app"});return $({queryKey:["search",n,e,a],queryFn:async({signal:t})=>(await s.get(`https://hn.algolia.com/api/v1/search_by_date?tags=${e||"story"}&query=${n}&page=${a}`,{signal:t})).json(),enabled:void 0!==n})})(),f=S(),p=c.useCallback(new X(t=>{f({to:`/${e}`,search:{search:t,page:1},replace:!0})},{wait:1e3}).maybeExecute,[]);return n.jsxs("div",{className:"flex h-full w-full flex-col items-center overflow-y-auto",children:[n.jsxs("div",{className:"flex w-full items-center justify-between p-2",children:[n.jsx(i,{className:"bg-gradient-to-br from-sky-700 to-sky-800 px-2 py-1 font-medium text-white",children:"BetterHN"}),n.jsx(ut,{})]}),n.jsxs("div",{className:"flex flex-col items-center pt-2",children:[n.jsxs("h1",{className:"mb-2 flex w-full items-center justify-center gap-2 text-center text-xl",children:[n.jsx(j,{icon:F,size:24})," Search for something"]}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Powered by Algolia"})]}),n.jsxs("div",{className:"mx-auto w-full max-w-4xl p-6 md:px-16",children:[n.jsx(ht,{className:"rounded-full border border-black/10 text-lg shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-orange-500/20 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-zinc-800 dark:focus-visible:ring-orange-400/30 dark:focus-visible:ring-offset-zinc-950",onChange:e=>{u(e.target.value),p(e.target.value)},placeholder:"Search...",value:d}),n.jsxs("div",{className:"mt-4",id:"search-results",children:[n.jsxs("div",{className:y("mb-2 flex flex-col items-center justify-between md:flex-row",(!r||0===r?.length)&&"hidden"),children:[n.jsxs("div",{className:"mb-1 font-medium text-base md:mb-0",children:["Search results for"," ",n.jsx("span",{className:"rounded-md bg-yellow-200 px-2 dark:bg-yellow-700",children:r})]}),n.jsx("div",{children:n.jsx(Zt,{defaultValue:a||"story",onValueChange:e=>f({to:".",search:{search:d,page:1,tags:e}}),children:n.jsxs(Jt,{children:[n.jsx(Qt,{className:"text-xs",value:"story",children:"All"}),n.jsx(Qt,{className:"text-xs",value:"show_hn",children:"Show"}),n.jsx(Qt,{className:"text-xs",value:"ask_hn",children:"Ask"}),n.jsx(Qt,{className:"text-xs",value:"front_page",children:"Front Page"})]})})})]}),g?n.jsx(Yt,{}):n.jsx("div",{className:"space-y-2",children:n.jsx(es,{origin:e,results:h,search:r||""})}),n.jsxs("div",{className:y("mt-4 flex w-full items-center justify-end gap-2 text-center",(!r||0===r?.length||0===h?.hits.length)&&"hidden"),children:[n.jsx(o,{disabled:1===l,hash:"search-results",search:{page:(l||1)-1,search:r},to:".",children:n.jsx(i,{disabled:1===l,size:"sm",variant:"outline",children:"Previous Page"})}),n.jsx(o,{disabled:l===h?.nbPages,hash:"search-results",search:{page:(l||1)+1,search:r},to:".",children:n.jsx(i,{disabled:l===h?.nbPages,size:"sm",variant:"outline",children:"Next Page"})})]})]})]})]})}function Yt(){return Array.from({length:10}).map((e,t)=>n.jsx("div",{className:"mt-2 h-20 w-full animate-pulse rounded-lg bg-zinc-200 dark:bg-zinc-800"},t.toString()))}c.forwardRef(({className:e,...t},s)=>n.jsx(Wt,{ref:s,className:y("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t})).displayName=Wt.displayName;const es=c.memo(function({results:e,origin:t,search:s}){return 0===s.length?n.jsx("div",{children:n.jsx(Y,{})}):0===e?.hits.length&&s.length>0?n.jsxs("div",{className:"mt-8 flex w-full items-center justify-center gap-2 text-center text-gray-500 text-sm",children:[n.jsx(j,{icon:L,size:24})," No results found"]}):n.jsx(n.Fragment,{children:e?.hits.map(e=>n.jsx("div",{className:"rounded-sm border border-gray-200 bg-white p-3 dark:border-zinc-800 dark:bg-zinc-900",children:n.jsxs(o,{params:{category:t,postId:`${r(e.title)}-${e.objectID}`},search:e=>e,state:e=>({...e,view:"post"}),to:"/$category/$postId",children:[n.jsx("p",{className:"font-medium",children:e.title}),n.jsx("p",{className:"mt-2 text-gray-500 text-sm",children:`${e.points} points by ${e.author} ${z(1e3*e.created_at_i,Date.now())}`})]})},e.objectID))})});function ts(){const e=A(),{params:t}=e.find(e=>"/_app"===e.routeId);return t.postId?n.jsx(P,{}):n.jsx(Xt,{origin:t.category})}export{ts as component};
