import{S as e,o as t,a as s,v as n,C as a,O as o}from"./worker-entry-BFFzWMHV.js";import{W as r,L as i,z as c,B as l,u as d,f as u,g as h,h as g,P as f,j as p,X as m,k as b,n as x,o as v,Y as y,c as j,H as w,Z as N,_ as k,$ as I,a0 as E,S as _,a1 as C,a2 as T,a3 as D,m as R,y as S,a4 as F,a5 as L}from"./router-DwtiA2Gk.js";import{u as A,f as P,a as $}from"./formatRelative-GRx4Affh.js";import{k as M,d as z}from"./fetcher-C0qtPk9m.js";import{d as O,h as q,R as K,b as B,F as V,a as U,c as G,u as H}from"./Combination-C902bN5t.js";import"node:events";import"node:stream";import"node:async_hooks";import"node:stream/web";import"./useBaseQuery-BHUKrbBs.js";function W(e,...t){return function(e){return"function"==typeof e}(e)?e(...t):e}class X{#e;#t;#s;#n;#a;#o;#r;#i=0;#c=5;#l=()=>{this.debugLog("Connected to event bus"),this.#a=!0,this.debugLog("Emitting queued events",this.#n),this.#n.forEach(e=>this.emitEventToBus(e)),this.#n=[],this.stopConnectLoop(),this.#t().removeEventListener("tanstack-connect-success",this.#l)};#d=()=>{if(this.#t().addEventListener("tanstack-connect-success",this.#l),this.#i<this.#c)return this.#i++,void this.dispatchCustomEvent("tanstack-connect",{});this.#t().removeEventListener("tanstack-connect",this.#d),this.debugLog("Max retries reached, giving up on connection"),this.stopConnectLoop()};constructor({pluginId:e,debug:t=!1}){this.#e=e,this.#t=this.getGlobalTarget,this.#s=t,this.debugLog(" Initializing event subscription for plugin",this.#e),this.#n=[],this.#a=!1,this.#o=null,this.#r=500}startConnectLoop(){null!==this.#o||this.#a||(this.debugLog(`Starting connect loop (every ${this.#r}ms)`),this.#o=setInterval(this.#d,this.#r))}stopConnectLoop(){null!==this.#o&&(clearInterval(this.#o),this.#o=null,this.debugLog("Stopped connect loop"))}debugLog(...e){this.#s}getGlobalTarget(){if("undefined"!=typeof globalThis&&globalThis.__TANSTACK_EVENT_TARGET__)return this.debugLog("Using global event target"),globalThis.__TANSTACK_EVENT_TARGET__;if("undefined"!=typeof window&&void 0!==window.addEventListener)return this.debugLog("Using window as event target"),window;const e="undefined"!=typeof EventTarget?new EventTarget:void 0;return void 0===e||void 0===e.addEventListener?(this.debugLog("No event mechanism available, running in non-web environment"),{addEventListener:()=>{},removeEventListener:()=>{},dispatchEvent:()=>!1}):(this.debugLog("Using new EventTarget as fallback"),e)}getPluginId(){return this.#e}dispatchCustomEventShim(e,t){try{const s=new Event(e,{detail:t});this.#t().dispatchEvent(s)}catch(s){this.debugLog("Failed to dispatch shim event")}}dispatchCustomEvent(e,t){try{this.#t().dispatchEvent(new CustomEvent(e,{detail:t}))}catch(s){this.dispatchCustomEventShim(e,t)}}emitEventToBus(e){this.debugLog("Emitting event to client bus",e),this.dispatchCustomEvent("tanstack-dispatch-event",e)}emit(e,t){return this.#a?this.emitEventToBus({type:`${this.#e}:${e}`,payload:t,pluginId:this.#e}):(this.debugLog("Bus not available, will be pushed as soon as connected"),this.#n.push({type:`${this.#e}:${e}`,payload:t,pluginId:this.#e}),void("undefined"!=typeof CustomEvent&&(this.#d(),this.startConnectLoop())))}on(e,t){const s=`${this.#e}:${e}`,n=e=>{this.debugLog("Received event from bus",e.detail),t(e.detail)};return this.#t().addEventListener(s,n),this.debugLog("Registered event to bus",s),()=>{this.#t().removeEventListener(s,n)}}onAll(e){const t=t=>{const s=t.detail;e(s)};return this.#t().addEventListener("tanstack-devtools-global",t),()=>this.#t().removeEventListener("tanstack-devtools-global",t)}onAllPluginEvents(e){const t=t=>{const s=t.detail;this.#e&&s.pluginId!==this.#e||e(s)};return this.#t().addEventListener("tanstack-devtools-global",t),()=>this.#t().removeEventListener("tanstack-devtools-global",t)}}const Z=new class extends X{constructor(e){super({pluginId:"pacer",debug:e?.debug})}};const Q={enabled:!0,leading:!1,trailing:!0,wait:0};class Y{constructor(t,s){this.fn=t,this.store=new e({canLeadingExecute:!0,executionCount:0,isPending:!1,lastArgs:void 0,status:"idle",maybeExecuteCount:0}),this.setOptions=e=>{this.options={...this.options,...e},this.#u()||this.cancel()},this.#h=e=>{var t,s;this.store.setState(t=>{const s={...t,...e},{isPending:n}=s;return{...s,status:this.#u()?n?"pending":"idle":"disabled"}}),t="Debouncer",s=this,Z.emit(t,s)},this.#u=()=>!!W(this.options.enabled,this),this.#g=()=>W(this.options.wait,this),this.maybeExecute=(...e)=>{if(!this.#u())return;this.#h({maybeExecuteCount:this.store.state.maybeExecuteCount+1});let t=!1;this.options.leading&&this.store.state.canLeadingExecute&&(this.#h({canLeadingExecute:!1}),t=!0,this.#f(...e)),this.options.trailing&&this.#h({isPending:!0,lastArgs:e}),this.#p&&clearTimeout(this.#p),this.#p=setTimeout(()=>{this.#h({canLeadingExecute:!0}),this.options.trailing&&!t&&this.#f(...e)},this.#g())},this.#f=(...e)=>{this.#u()&&(this.fn(...e),this.#h({executionCount:this.store.state.executionCount+1,isPending:!1,lastArgs:void 0}),this.options.onExecute?.(e,this))},this.flush=()=>{this.store.state.isPending&&this.store.state.lastArgs&&(this.#m(),this.#f(...this.store.state.lastArgs))},this.#m=()=>{this.#p&&(clearTimeout(this.#p),this.#p=void 0)},this.cancel=()=>{this.#m(),this.#h({canLeadingExecute:!0,isPending:!1})},this.reset=()=>{this.#h({canLeadingExecute:!0,executionCount:0,isPending:!1,lastArgs:void 0,status:"idle",maybeExecuteCount:0})},this.key=s.key||("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID?crypto.randomUUID():""),this.options={...Q,...s},this.#h(this.options.initialState??{}),Z.on("d-Debouncer",e=>{e.payload.key===this.key&&(this.#h(e.payload.store.state),this.setOptions(e.payload.options))})}#p;#h;#u;#g;#f;#m}function J(){const{pathname:e}=O(),s=e.split("/")[1]||"top",{data:n,isLoading:a}=A({queryKey:["recents"],queryFn:async({signal:e})=>await z.get("search_by_date?tags=story",{signal:e}).json()}),{data:o,isLoading:r}=A({queryKey:["active-posts"],queryFn:async({signal:e})=>{const t=Math.floor(Date.now()/1e3)-3600;return await z.get(`search_by_date?tags=comment&numericFilters=created_at_i>${t}`,{signal:e}).json()}});return t.jsxs("div",{className:"mt-8",children:[t.jsx("div",{children:"Or browse recents submissions"}),t.jsx("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-2 lg:grid-cols-3",children:a?t.jsx(ee,{}):t.jsx(te,{category:s,posts:n?.hits||[]})}),t.jsx("div",{className:"mt-8",children:"Or active discussions"}),t.jsx("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-2 lg:grid-cols-3",children:r?t.jsx(ee,{}):t.jsx(se,{category:s,comments:o?.hits||[]})})]})}function ee(){return Array.from({length:6}).map((e,s)=>t.jsx("div",{className:"mt-2 h-40 w-full animate-pulse rounded-lg bg-zinc-200 dark:bg-white/10"},s.toString()))}function te({posts:e,category:s}){return e.slice(0,6).map(e=>t.jsxs("div",{className:"mt-2 flex min-h-40 w-full flex-col rounded-lg border border-zinc-200 bg-zinc-100 p-2 text-sm dark:border-gray-800 dark:bg-white/10 dark:text-gray-200",children:[t.jsx("div",{className:"mb-2 flex-grow",children:e.url?t.jsx(i,{className:"hover:text-orange-700 dark:hover:text-orange-300",rel:"noopener noreferrer",target:"_blank",to:e.url,children:t.jsx("h1",{children:e.title})}):t.jsx("h1",{children:e.title})}),t.jsxs("div",{className:"text-xs",children:[t.jsx("p",{children:P(1e3*e.created_at_i,{addSuffix:!0})}),t.jsx(i,{params:{postId:`${c(e.title)}-${e.objectID}`,category:s},state:e=>({...e,view:"post"}),to:"/$category/$postId",children:t.jsx(l,{className:"mt-2 w-full",size:"sm",variant:"outline",children:"View Post"})})]})]},e.objectID))}function se({comments:e,category:s}){return e.slice(0,6).map(e=>t.jsxs("div",{className:"mt-2 flex min-h-40 w-full flex-col rounded-lg border border-zinc-200 bg-zinc-100 p-2 text-sm dark:border-gray-800 dark:bg-white/10 dark:text-gray-200",children:[t.jsx("div",{className:"mb-2 flex-grow",children:e.story_url?t.jsx(i,{className:"hover:text-orange-700 dark:hover:text-orange-300",rel:"noopener noreferrer",target:"_blank",to:e.story_url,children:t.jsx("h1",{children:e.story_title||"HN Discussions"})}):t.jsx("h1",{children:e.story_title||"HN Discussions"})}),t.jsxs("div",{className:"text-xs",children:[t.jsx("p",{children:P(1e3*e.created_at_i,{addSuffix:!0})}),t.jsx(i,{params:{postId:`${c(e.story_title||"")}-${e.story_id}`,category:s},state:e=>({...e,view:"post"}),to:"/$category/$postId",children:t.jsx(l,{className:"mt-2 w-full",size:"sm",variant:"outline",children:"View Post"})})]})]},e.objectID))}var ne="Dialog",[ae,oe]=u(ne),[re,ie]=ae(ne),ce=e=>{const{__scopeDialog:n,children:a,open:o,defaultOpen:r,onOpenChange:i,modal:c=!0}=e,l=s.useRef(null),u=s.useRef(null),[g,f]=d({prop:o,defaultProp:r??!1,onChange:i,caller:ne});return t.jsx(re,{scope:n,triggerRef:l,contentRef:u,contentId:h(),titleId:h(),descriptionId:h(),open:g,onOpenChange:f,onOpenToggle:s.useCallback(()=>f(e=>!e),[f]),modal:c,children:a})};ce.displayName=ne;var le="DialogTrigger",de=s.forwardRef((e,s)=>{const{__scopeDialog:n,...a}=e,o=ie(le,n),r=g(s,o.triggerRef);return t.jsx(f.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":De(o.open),...a,ref:r,onClick:p(e.onClick,o.onOpenToggle)})});de.displayName=le;var ue="DialogPortal",[he,ge]=ae(ue,{forceMount:void 0}),fe=e=>{const{__scopeDialog:n,forceMount:a,children:o,container:r}=e,i=ie(ue,n);return t.jsx(he,{scope:n,forceMount:a,children:s.Children.map(o,e=>t.jsx(m,{present:a||i.open,children:t.jsx(b,{asChild:!0,container:r,children:e})}))})};fe.displayName=ue;var pe="DialogOverlay",me=s.forwardRef((e,s)=>{const n=ge(pe,e.__scopeDialog),{forceMount:a=n.forceMount,...o}=e,r=ie(pe,e.__scopeDialog);return r.modal?t.jsx(m,{present:a||r.open,children:t.jsx(xe,{...o,ref:s})}):null});me.displayName=pe;var be=x("DialogOverlay.RemoveScroll"),xe=s.forwardRef((e,s)=>{const{__scopeDialog:n,...a}=e,o=ie(pe,n);return t.jsx(K,{as:be,allowPinchZoom:!0,shards:[o.contentRef],children:t.jsx(f.div,{"data-state":De(o.open),...a,ref:s,style:{pointerEvents:"auto",...a.style}})})}),ve="DialogContent",ye=s.forwardRef((e,s)=>{const n=ge(ve,e.__scopeDialog),{forceMount:a=n.forceMount,...o}=e,r=ie(ve,e.__scopeDialog);return t.jsx(m,{present:a||r.open,children:r.modal?t.jsx(je,{...o,ref:s}):t.jsx(we,{...o,ref:s})})});ye.displayName=ve;var je=s.forwardRef((e,n)=>{const a=ie(ve,e.__scopeDialog),o=s.useRef(null),r=g(n,a.contentRef,o);return s.useEffect(()=>{const e=o.current;if(e)return q(e)},[]),t.jsx(Ne,{...e,ref:r,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:p(e.onCloseAutoFocus,e=>{e.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:p(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;(2===t.button||s)&&e.preventDefault()}),onFocusOutside:p(e.onFocusOutside,e=>e.preventDefault())})}),we=s.forwardRef((e,n)=>{const a=ie(ve,e.__scopeDialog),o=s.useRef(!1),r=s.useRef(!1);return t.jsx(Ne,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(o.current||a.triggerRef.current?.focus(),t.preventDefault()),o.current=!1,r.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(o.current=!0,"pointerdown"===t.detail.originalEvent.type&&(r.current=!0));const s=t.target,n=a.triggerRef.current?.contains(s);n&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&r.current&&t.preventDefault()}})}),Ne=s.forwardRef((e,n)=>{const{__scopeDialog:a,trapFocus:o,onOpenAutoFocus:r,onCloseAutoFocus:i,...c}=e,l=ie(ve,a),d=s.useRef(null),u=g(n,d);return B(),t.jsxs(t.Fragment,{children:[t.jsx(V,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:r,onUnmountAutoFocus:i,children:t.jsx(v,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":De(l.open),...c,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),t.jsxs(t.Fragment,{children:[t.jsx(Le,{titleId:l.titleId}),t.jsx(Ae,{contentRef:d,descriptionId:l.descriptionId})]})]})}),ke="DialogTitle",Ie=s.forwardRef((e,s)=>{const{__scopeDialog:n,...a}=e,o=ie(ke,n);return t.jsx(f.h2,{id:o.titleId,...a,ref:s})});Ie.displayName=ke;var Ee="DialogDescription",_e=s.forwardRef((e,s)=>{const{__scopeDialog:n,...a}=e,o=ie(Ee,n);return t.jsx(f.p,{id:o.descriptionId,...a,ref:s})});_e.displayName=Ee;var Ce="DialogClose",Te=s.forwardRef((e,s)=>{const{__scopeDialog:n,...a}=e,o=ie(Ce,n);return t.jsx(f.button,{type:"button",...a,ref:s,onClick:p(e.onClick,()=>o.onOpenChange(!1))})});function De(e){return e?"open":"closed"}Te.displayName=Ce;var Re="DialogTitleWarning",[Se,Fe]=y(Re,{contentName:ve,titleName:ke,docsSlug:"dialog"}),Le=({titleId:e})=>{const t=Fe(Re),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return s.useEffect(()=>{if(e){document.getElementById(e)}},[n,e]),null},Ae=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Fe("DialogDescriptionWarning").contentName}}.`;return s.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");if(t&&s){document.getElementById(t)}},[n,e,t]),null},Pe=me,$e=ye,Me=Ie,ze=_e,Oe=Te;const qe=ce,Ke=de,Be=fe,Ve=s.forwardRef(({className:e,...s},n)=>t.jsx(Pe,{ref:n,className:j("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));Ve.displayName=Pe.displayName;const Ue=s.forwardRef(({className:e,children:s,...n},a)=>t.jsxs(Be,{children:[t.jsx(Ve,{}),t.jsxs($e,{ref:a,className:j("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:bg-zinc-900",e),...n,children:[s,t.jsxs(Oe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsx(w,{icon:N,className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ue.displayName=$e.displayName;const Ge=({className:e,...s})=>t.jsx("div",{className:j("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});Ge.displayName="DialogHeader";const He=s.forwardRef(({className:e,...s},n)=>t.jsx(Me,{ref:n,className:j("text-lg font-semibold leading-none tracking-tight",e),...s}));He.displayName=Me.displayName;s.forwardRef(({className:e,...s},n)=>t.jsx(ze,{ref:n,className:j("text-sm text-muted-foreground",e),...s})).displayName=ze.displayName;var We=s.forwardRef((e,s)=>t.jsx(f.label,{...e,ref:s,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));We.displayName="Label";var Xe=We;const Ze=k("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Qe=s.forwardRef(({className:e,...s},n)=>t.jsx(Xe,{ref:n,className:j(Ze(),e),...s}));Qe.displayName=Xe.displayName;var Ye="Switch",[Je,et]=u(Ye),[tt,st]=Je(Ye),nt=s.forwardRef((e,n)=>{const{__scopeSwitch:a,name:o,checked:r,defaultChecked:i,required:c,disabled:l,value:u="on",onCheckedChange:h,form:m,...b}=e,[x,v]=s.useState(null),y=g(n,e=>v(e)),j=s.useRef(!1),w=!x||(m||!!x.closest("form")),[N,k]=d({prop:r,defaultProp:i??!1,onChange:h,caller:Ye});return t.jsxs(tt,{scope:a,checked:N,disabled:l,children:[t.jsx(f.button,{type:"button",role:"switch","aria-checked":N,"aria-required":c,"data-state":it(N),"data-disabled":l?"":void 0,disabled:l,value:u,...b,ref:y,onClick:p(e.onClick,e=>{k(e=>!e),w&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),w&&t.jsx(rt,{control:x,bubbles:!j.current,name:o,value:u,checked:N,required:c,disabled:l,form:m,style:{transform:"translateX(-100%)"}})]})});nt.displayName=Ye;var at="SwitchThumb",ot=s.forwardRef((e,s)=>{const{__scopeSwitch:n,...a}=e,o=st(at,n);return t.jsx(f.span,{"data-state":it(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:s})});ot.displayName=at;var rt=s.forwardRef(({__scopeSwitch:e,control:n,checked:a,bubbles:o=!0,...r},i)=>{const c=s.useRef(null),l=g(c,i),d=U(a),u=I(n);return s.useEffect(()=>{const e=c.current;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(d!==a&&s){const t=new Event("click",{bubbles:o});s.call(e,a),e.dispatchEvent(t)}},[d,a,o]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...r,tabIndex:-1,ref:l,style:{...r.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function it(e){return e?"checked":"unchecked"}rt.displayName="SwitchBubbleInput";var ct=nt,lt=ot;const dt=s.forwardRef(({className:e,...s},n)=>t.jsx(ct,{className:j("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=unchecked]:bg-gray-300 data-[state=checked]:border-blue-600 data-[state=checked]:bg-blue-600 data-[state=checked]:text-white dark:data-[state=checked]:border-blue-700 dark:data-[state=checked]:bg-blue-700 dark:data-[state=unchecked]:bg-gray-700",e),...s,ref:n,children:t.jsx(lt,{className:j("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));function ut(){const{resolvedTheme:e,setTheme:s}=E(),a="dark"===e,o=n(_,e=>e.compactMode);return t.jsxs(qe,{children:[t.jsx(Ke,{asChild:!0,children:t.jsx(l,{variant:"outline",children:t.jsx(w,{icon:C,size:16})})}),t.jsxs(Ue,{className:"mx-auto max-w-[calc(100vw-2rem)] rounded-md p-4 text-sm duration-0 md:mx-0 md:max-w-lg",children:[t.jsx(Ge,{children:t.jsx(He,{className:"font-medium text-base",children:"Configuration"})}),t.jsx(_e,{asChild:!0,children:t.jsxs("div",{children:[t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{className:"flex flex-row items-center justify-between",children:[t.jsx("div",{children:"Color Schema"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Qe,{className:"text-xs",htmlFor:"color-mode",children:a?"Dark":"Light"}),t.jsx(dt,{checked:a,id:"color-mode",onCheckedChange:()=>{s(a?"light":"dark")}})]})]}),t.jsxs("div",{className:"flex flex-row items-center justify-between",children:[t.jsx("div",{children:"Layout Mode"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Qe,{className:"text-xs",htmlFor:"compact-mode",children:"Compact"}),t.jsx(dt,{checked:o,id:"compact-mode",onCheckedChange:e=>T("compactMode",e)})]})]})]}),t.jsxs("div",{className:"mt-8 border-black/20 border-t border-dashed bg-zinc-200 p-2 font-mono text-xs dark:border-white/20 dark:bg-zinc-800",children:[t.jsx("strong",{children:"About"})," ",t.jsx("br",{}),"BetterHN is a Hacker News reader with a modern UI. Enjoy a clean, distraction-free interface to read Hacker News stories, comments, and discussions."]}),t.jsx(l,{asChild:!0,className:"mt-2",size:"xs",children:t.jsxs("a",{href:"https://github.com/famasya/betterhn",rel:"noopener noreferrer",target:"_blank",children:[t.jsx(w,{icon:D})," Source Code"]})})]})})]})]})}dt.displayName=ct.displayName;const ht=s.forwardRef(({className:e,type:s,...n},a)=>t.jsx("input",{type:s,className:j("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:bg-white/15",e),ref:a,...n}));ht.displayName="Input";var gt="rovingFocusGroup.onEntryFocus",ft={bubbles:!1,cancelable:!0},pt="RovingFocusGroup",[mt,bt,xt]=G(pt),[vt,yt]=u(pt,[xt]),[jt,wt]=vt(pt),Nt=s.forwardRef((e,s)=>t.jsx(mt.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(mt.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(kt,{...e,ref:s})})}));Nt.displayName=pt;var kt=s.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:a,orientation:o,loop:r=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:h,preventScrollOnEntryFocus:m=!1,...b}=e,x=s.useRef(null),v=g(n,x),y=H(i),[j,w]=d({prop:c,defaultProp:l??null,onChange:u,caller:pt}),[N,k]=s.useState(!1),I=R(h),E=bt(a),_=s.useRef(!1),[C,T]=s.useState(0);return s.useEffect(()=>{const e=x.current;if(e)return e.addEventListener(gt,I),()=>e.removeEventListener(gt,I)},[I]),t.jsx(jt,{scope:a,orientation:o,dir:y,loop:r,currentTabStopId:j,onItemFocus:s.useCallback(e=>w(e),[w]),onItemShiftTab:s.useCallback(()=>k(!0),[]),onFocusableItemAdd:s.useCallback(()=>T(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>T(e=>e-1),[]),children:t.jsx(f.div,{tabIndex:N||0===C?-1:0,"data-orientation":o,...b,ref:v,style:{outline:"none",...e.style},onMouseDown:p(e.onMouseDown,()=>{_.current=!0}),onFocus:p(e.onFocus,e=>{const t=!_.current;if(e.target===e.currentTarget&&t&&!N){const t=new CustomEvent(gt,ft);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=E().filter(e=>e.focusable);Ct([e.find(e=>e.active),e.find(e=>e.id===j),...e].filter(Boolean).map(e=>e.ref.current),m)}}_.current=!1}),onBlur:p(e.onBlur,()=>k(!1))})})}),It="RovingFocusGroupItem",Et=s.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:a,focusable:o=!0,active:r=!1,tabStopId:i,children:c,...l}=e,d=h(),u=i||d,g=wt(It,a),m=g.currentTabStopId===u,b=bt(a),{onFocusableItemAdd:x,onFocusableItemRemove:v,currentTabStopId:y}=g;return s.useEffect(()=>{if(o)return x(),()=>v()},[o,x,v]),t.jsx(mt.ItemSlot,{scope:a,id:u,focusable:o,active:r,children:t.jsx(f.span,{tabIndex:m?0:-1,"data-orientation":g.orientation,...l,ref:n,onMouseDown:p(e.onMouseDown,e=>{o?g.onItemFocus(u):e.preventDefault()}),onFocus:p(e.onFocus,()=>g.onItemFocus(u)),onKeyDown:p(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void g.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,s){const n=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,s);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(n)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(n)?void 0:_t[n]}(e,g.orientation,g.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=b().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){"prev"===t&&a.reverse();const o=a.indexOf(e.currentTarget);a=g.loop?(n=o+1,(s=a).map((e,t)=>s[(n+t)%s.length])):a.slice(o+1)}setTimeout(()=>Ct(a))}var s,n}),children:"function"==typeof c?c({isCurrentTabStop:m,hasTabStop:null!=y}):c})})});Et.displayName=It;var _t={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ct(e,t=!1){const s=document.activeElement;for(const n of e){if(n===s)return;if(n.focus({preventScroll:t}),document.activeElement!==s)return}}var Tt=Nt,Dt=Et,Rt="Tabs",[St,Ft]=u(Rt,[yt]),Lt=yt(),[At,Pt]=St(Rt),$t=s.forwardRef((e,s)=>{const{__scopeTabs:n,value:a,onValueChange:o,defaultValue:r,orientation:i="horizontal",dir:c,activationMode:l="automatic",...u}=e,g=H(c),[p,m]=d({prop:a,onChange:o,defaultProp:r??"",caller:Rt});return t.jsx(At,{scope:n,baseId:h(),value:p,onValueChange:m,orientation:i,dir:g,activationMode:l,children:t.jsx(f.div,{dir:g,"data-orientation":i,...u,ref:s})})});$t.displayName=Rt;var Mt="TabsList",zt=s.forwardRef((e,s)=>{const{__scopeTabs:n,loop:a=!0,...o}=e,r=Pt(Mt,n),i=Lt(n);return t.jsx(Tt,{asChild:!0,...i,orientation:r.orientation,dir:r.dir,loop:a,children:t.jsx(f.div,{role:"tablist","aria-orientation":r.orientation,...o,ref:s})})});zt.displayName=Mt;var Ot="TabsTrigger",qt=s.forwardRef((e,s)=>{const{__scopeTabs:n,value:a,disabled:o=!1,...r}=e,i=Pt(Ot,n),c=Lt(n),l=Vt(i.baseId,a),d=Ut(i.baseId,a),u=a===i.value;return t.jsx(Dt,{asChild:!0,...c,focusable:!o,active:u,children:t.jsx(f.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...r,ref:s,onMouseDown:p(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(a)}),onKeyDown:p(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(a)}),onFocus:p(e.onFocus,()=>{const e="manual"!==i.activationMode;u||o||!e||i.onValueChange(a)})})})});qt.displayName=Ot;var Kt="TabsContent",Bt=s.forwardRef((e,n)=>{const{__scopeTabs:a,value:o,forceMount:r,children:i,...c}=e,l=Pt(Kt,a),d=Vt(l.baseId,o),u=Ut(l.baseId,o),h=o===l.value,g=s.useRef(h);return s.useEffect(()=>{const e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),t.jsx(m,{present:r||h,children:({present:s})=>t.jsx(f.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!s,id:u,tabIndex:0,...c,ref:n,style:{...e.style,animationDuration:g.current?"0s":void 0},children:s&&i})})});function Vt(e,t){return`${e}-trigger-${t}`}function Ut(e,t){return`${e}-content-${t}`}Bt.displayName=Kt;var Gt=zt,Ht=qt,Wt=Bt;const Xt=$t,Zt=s.forwardRef(({className:e,...s},n)=>t.jsx(Gt,{ref:n,className:j("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...s}));Zt.displayName=Gt.displayName;const Qt=s.forwardRef(({className:e,...s},n)=>t.jsx(Ht,{ref:n,className:j("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...s}));Qt.displayName=Ht.displayName;function Yt({origin:e}){const{tags:n,search:a,page:o}=r({from:"/_app"}),[c,d]=s.useState(a||""),{data:u,isLoading:h}=(()=>{const{tags:e,search:t,page:s}=r({from:"/_app"});return A({queryKey:["search",t,e,s],queryFn:async({signal:n})=>(await M.get(`https://hn.algolia.com/api/v1/search_by_date?tags=${e||"story"}&query=${t}&page=${s}`,{signal:n})).json(),enabled:void 0!==t})})(),g=S(),f=s.useCallback(new Y(t=>{g({to:`/${e}`,search:{search:t,page:1},replace:!0})},{wait:1e3}).maybeExecute,[]);return t.jsxs("div",{className:"flex h-full w-full flex-col items-center overflow-y-auto",children:[t.jsxs("div",{className:"flex w-full items-center justify-between p-2",children:[t.jsx(l,{className:"bg-gradient-to-br from-sky-700 to-sky-800 px-2 py-1 font-medium text-white",children:"BetterHN"}),t.jsx(ut,{})]}),t.jsxs("div",{className:"flex flex-col items-center pt-2",children:[t.jsxs("h1",{className:"mb-2 flex w-full items-center justify-center gap-2 text-center text-xl",children:[t.jsx(w,{icon:F,size:24})," Search for something"]}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Powered by Algolia"})]}),t.jsxs("div",{className:"mx-auto w-full max-w-4xl p-6 md:px-16",children:[t.jsx(ht,{className:"rounded-full border border-black/10 text-lg shadow-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-orange-500/20 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-zinc-800 dark:focus-visible:ring-orange-400/30 dark:focus-visible:ring-offset-zinc-950",onChange:e=>{d(e.target.value),f(e.target.value)},placeholder:"Search...",value:c}),t.jsxs("div",{className:"mt-4",id:"search-results",children:[t.jsxs("div",{className:j("mb-2 flex flex-col items-center justify-between md:flex-row",(!a||0===a?.length)&&"hidden"),children:[t.jsxs("div",{className:"mb-1 font-medium text-base md:mb-0",children:["Search results for"," ",t.jsx("span",{className:"rounded-md bg-yellow-200 px-2 dark:bg-yellow-700",children:a})]}),t.jsx("div",{children:t.jsx(Xt,{defaultValue:n||"story",onValueChange:e=>g({to:".",search:{search:c,page:1,tags:e}}),children:t.jsxs(Zt,{children:[t.jsx(Qt,{className:"text-xs",value:"story",children:"All"}),t.jsx(Qt,{className:"text-xs",value:"show_hn",children:"Show"}),t.jsx(Qt,{className:"text-xs",value:"ask_hn",children:"Ask"}),t.jsx(Qt,{className:"text-xs",value:"front_page",children:"Front Page"})]})})})]}),h?t.jsx(Jt,{}):t.jsx("div",{className:"space-y-2",children:t.jsx(es,{origin:e,results:u,search:a||""})}),t.jsxs("div",{className:j("mt-4 flex w-full items-center justify-end gap-2 text-center",(!a||0===a?.length||0===u?.hits.length)&&"hidden"),children:[t.jsx(i,{disabled:1===o,hash:"search-results",search:{page:(o||1)-1,search:a},to:".",children:t.jsx(l,{disabled:1===o,size:"sm",variant:"outline",children:"Previous Page"})}),t.jsx(i,{disabled:o===u?.nbPages,hash:"search-results",search:{page:(o||1)+1,search:a},to:".",children:t.jsx(l,{disabled:o===u?.nbPages,size:"sm",variant:"outline",children:"Next Page"})})]})]})]})]})}function Jt(){return Array.from({length:10}).map((e,s)=>t.jsx("div",{className:"mt-2 h-20 w-full animate-pulse rounded-lg bg-zinc-200 dark:bg-zinc-800"},s.toString()))}s.forwardRef(({className:e,...s},n)=>t.jsx(Wt,{ref:n,className:j("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s})).displayName=Wt.displayName;const es=s.memo(function({results:e,origin:s,search:n}){return 0===n.length?t.jsx("div",{children:t.jsx(J,{})}):0===e?.hits.length&&n.length>0?t.jsxs("div",{className:"mt-8 flex w-full items-center justify-center gap-2 text-center text-gray-500 text-sm",children:[t.jsx(w,{icon:L,size:24})," No results found"]}):t.jsx(t.Fragment,{children:e?.hits.map(e=>t.jsx("div",{className:"rounded-sm border border-gray-200 bg-white p-3 dark:border-zinc-800 dark:bg-zinc-900",children:t.jsxs(i,{params:{category:s,postId:`${c(e.title)}-${e.objectID}`},search:e=>e,state:e=>({...e,view:"post"}),to:"/$category/$postId",children:[t.jsx("p",{className:"font-medium",children:e.title}),t.jsx("p",{className:"mt-2 text-gray-500 text-sm",children:`${e.points} points by ${e.author} ${$(1e3*e.created_at_i,Date.now())}`})]})},e.objectID))})});function ts(){const e=a(),{params:s}=e.find(e=>"/_app"===e.routeId);return s.postId?t.jsx(o,{}):t.jsx(Yt,{origin:s.category})}export{ts as component};
